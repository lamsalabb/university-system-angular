<main class="container py-5">

  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="fw-bold mb-0">User Management</h3>
    <a
      routerLink="/admin/register-user"
      class="btn btn-primary btn-sm"
    >
      Register User
    </a>
  </div>

  @if (loading()) {
    <p class="text-muted">Loading usersâ€¦</p>
  }

  @if (error()) {
    <p class="text-danger">{{ error() }}</p>
  }

  @if (!loading() && !error()) {

    <div class="card border-0 shadow-sm">
      <div class="card-body p-0">

        <table class="table table-hover align-middle mb-0">

          <thead class="table-light">
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Role</th>
            <th>Status</th>
            <th class="text-end">Actions</th>
          </tr>
          </thead>

          <tbody>

            @for (u of users(); track u.id) {
              <tr>

                <td>{{ u.firstName }} {{ u.lastName }}</td>
                <td>{{ u.email }}</td>

                <td>
                  <span class="badge bg-secondary">
                    {{ u.role }}
                  </span>
                </td>

                <td>
                  <span
                    class="badge"
                    [class.bg-success]="u.active"
                    [class.bg-danger]="!u.active"
                  >
                    {{ u.active ? 'Active' : 'Inactive' }}
                  </span>
                </td>

                <td class="text-end">

                  @if (u.role !== 'ADMIN') {
                    <button
                      class="btn btn-sm btn-outline-primary me-2"
                    >
                      Edit
                    </button>



                    <button
                      class="btn btn-sm btn-outline-danger"
                      (click)="deleteUser(u.id)">
                      Delete
                    </button>
                  }

                  @if (u.role === 'ADMIN') {
                    <span class="text-muted small fst-italic">
                      Admin
                    </span>
                  }

                </td>

              </tr>
            }

          </tbody>

        </table>

      </div>
    </div>
  }

</main>

