<main class="page-container">

  <div class="list-header">
    <h3 class="list-title">My Courses</h3>
  </div>

  <div class="list-body">

    @if (loading()) {
      <p class="muted-text">Loading coursesâ€¦</p>
    }

    @if (error()) {
      <p class="error-text">{{ error() }}</p>
    }

    @if (!loading() && !error()) {
      <div class="list-card">
        <table class="data-table">
          <thead>
          <tr>
            <th>Course Code</th>
            <th>Title</th>
            <th class="center">Credits</th>
            <th class="center">Grade</th>
            <th class="center">Status</th>
            <th class="align-right action-col">Actions</th>
          </tr>
          </thead>

          <tbody>
            @if (courses().length === 0) {
              <tr>
                <td class="empty-row" colspan="6">
                  No enrollments found.
                </td>
              </tr>
            }

            @for (c of courses(); track c.course.id) {
              <tr>
                <td>{{ c.course.code }}</td>
                <td>{{ c.course.title }}</td>
                <td class="center">{{ c.course.credits }}</td>
                <td class="center">{{ c.enrollmentGrade }}</td>


                <td class="center">
                  <span
                    [class.danger]="c.enrollmentStatus === 'DROPPED'"
                    [class.neutral]="c.enrollmentStatus === 'COMPLETED'"
                    [class.success]="c.enrollmentStatus === 'ENROLLED'"
                    class="status-badge"
                  >
                    {{ c.enrollmentStatus }}
                  </span>
                </td>

                <td class="align-right action-col">
                  @if (c.enrollmentStatus === 'ENROLLED') {
                    <button
                      (click)="dropEnrollment(c.enrollmentId)"
                      class="link-button danger"
                    >
                      Drop
                    </button>
                  }
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    }

  </div>

</main>
